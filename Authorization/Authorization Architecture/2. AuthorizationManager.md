-----
### ê°œìš”
-----
1. ì¸ì¦ëœ ì‚¬ìš©ìê°€ ìš”ì²­ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œì„œ, ì¸ì¦ëœ ì‚¬ìš©ìì˜ ê¶Œí•œ ì •ë³´ì™€ ìš”ì²­ ìì›ì˜ ë³´ì•ˆ ìš”êµ¬ ì‚¬í•­ì„ ê¸°ë°˜ìœ¼ë¡œ ê¶Œí•œ ë¶€ì—¬ ê²°ì •ì„ ë‚´ë¦¼
2. Spring Securityì˜ ìš”ì²­ ê¸°ë°˜, ë©”ì„œë“œ ê¸°ë°˜ì˜ ì¸ê°€ êµ¬ì„± ìš”ì†Œì—ì„œ í˜¸ì¶œë˜ë©°, ìµœì¢… ì•¡ì„¸ìŠ¤ ì œì–´ ê²°ì •ì„ ìˆ˜í–‰
3. Spring Securityì˜ í•„ìˆ˜ êµ¬ì„± ìš”ì†Œë¡œì„œ ê¶Œí•œ ë¶€ì—¬ ì²˜ë¦¬ëŠ” AuthorizationFilterë¥¼ í†µí•´ ì´ë£¨ì–´ì§€ë©°, AuthorizationFilterëŠ” AuthorizationManagerë¥¼ í˜¸ì¶œí•˜ì—¬ ê¶Œí•œ ë¶€ì—¬ ê²°ì •ì„ ë‚´ë¦¼

-----
### êµ¬ì¡°
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/cb25ea61-d0cf-4116-81a5-1cb76603121c">
</div>

1. check()
   - ê¶Œí•œ ë¶€ì—¬ ê²°ì •ì„ ë‚´ë¦´ ë•Œ ëª¨ë“  ê´€ë ¨ ì •ë³´(ì¸ì¦ ê°ì²´, ì²´í¬ ëŒ€ìƒ(ê¶Œí•œ ì •ë³´, ìš”ì²­ ì •ë³´, í˜¸ì¶œ ì •ë³´ ë“±)) ì „ë‹¬
   - ì•¡ì„¸ìŠ¤ê°€ í—ˆìš©ë˜ë©´ trueë¥¼ í¬í•¨í•˜ëŠ” AuthroizationDecision, ê±°ë¶€ë˜ë©´ falseë¥¼ í¬í•¨í•˜ëŠ” AuthorizationDecision, ê²°ì •ì„ ë‚´ë¦´ ìˆ˜ ì—†ëŠ” ê²½ìš° null ë°˜í™˜

2. verify()
   - checkë¥¼ í˜¸ì¶œí•´ì„œ ë°˜í™˜ëœ ê°’ì´ falseë¥¼ ê°€ì§„ AuthorziationDecisionì¸ ê²½ìš°, AccessDeniedExceptionì„ throw

-----
### AuthorizationManager í´ë˜ìŠ¤ ê³„ì¸µ êµ¬ì¡°
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/d95aebbb-7680-4bf0-9ca0-3ed00b26fc5b">
</div>

-----
### AuthorizationManager êµ¬í˜„ì²´ ì¢…ë¥˜ ë° íŠ¹ì§•
-----
1. RequestMatcherDelegatingAuthorizationManager (ìš”ì²­ ê¸°ë°˜ ê¶Œí•œ ë¶€ì—¬ ê´€ë¦¬ì) : ì¸ê°€ ì„¤ì •ì—ì„œ ì§€ì •í•œ ëª¨ë“  ìš”ì²­ íŒ¨í„´ê³¼ ê¶Œí•œ ê·œì¹™ì„ ë§¤í•‘í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ê¶Œí•œ ê²€ì‚¬ ì‹œ ê°€ì¥ ì í•©í•œ AuthorizationManager êµ¬í˜„ì²´ë¥¼ ì„ íƒí•´ ìœ„ì„
   - AuthenticatedAuthorizationManager : ì¸ì¦ëœ ì‚¬ìš©ìì—ê²Œ ì ‘ê·¼ í—ˆìš©, ì´ í´ë˜ìŠ¤ëŠ” ì‚¬ìš©ìê°€ ì‹œìŠ¤í…œì— ë¡œê·¸ì¸í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²°ì •
   - ğŸ’¡ AuthorityAuthorizationManager : íŠ¹ì • ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìì—ê²Œë§Œ ì ‘ê·¼ í—ˆìš©, ì£¼ë¡œ ì‚¬ìš©ìì˜ ê¶Œí•œ(ì˜ˆ) ROLE_USER, ROLE_ADMIN)ì„ ê¸°ë°˜ìœ¼ë¡œ ì ‘ê·¼ ì œì–´
   - WebExpressionAuthorizationManager : ì›¹ ë³´ì•ˆ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ ê¶Œí™˜ ê´€ë¦¬ (ì˜ˆ) hasRole('ADMIN') ë˜ëŠ” hasAuthority('WRITE_PERMISSIONS')ì™€ ê°™ì€ í‘œí˜„ì‹ ì‚¬ìš© ê°€ëŠ¥)

2. ë©”ì„œë“œ ê¸°ë°˜ ê¶Œí•œ ë¶€ì—¬ ê´€ë¦¬ì (AOPë¡œ êµ¬ì„±)
   - PreAuthorizeAuthorizationManager : ë©”ì„œë“œ ì‹¤í–‰ ì „ ê¶Œí•œ ê²€ì‚¬, @PreAuthorize ì• ë„ˆí…Œì´ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë©°, ë©”ì„œë“œ ì‹¤í–‰ ì „ ì‚¬ìš©ì ê¶Œí•œ í™•ì¸
   - PostAuthorizeAuthorizationManager : ë©”ì„œë“œ ì‹¤í–‰ í›„ ê¶Œí•œ ê²€ì‚¬, @PostAuthorize ì• ë„ˆí…Œì´ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë©°, ë©”ì„œë“œ ì‹¤í–‰ í›„ ê²°ê³¼ì— ë”°ë¼ ì ‘ê·¼ í—ˆìš© ë° ê±°ë¶€
   - Jsr250AuthorizationManager : JSR-250 ì• ë„ˆí…Œì´ì…˜ (@RolesAllowed, @DenyAll, @PermitAll)ì„ ì‚¬ìš©í•˜ì—¬ ê¶Œí•œ ê´€ë¦¬
   - SecuredAuthorizationManager : @Secured ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë©”ì„œë“œ ìˆ˜ì¤€ì˜ ë³´ì•ˆ ì œê³µ, ì´ ì• ë„ˆí…Œì´ì…˜ì€ íŠ¹ì • ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ë©”ì„œë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•¨

-----
### ì½”ë“œ
-----
1. AuthorizationManager
```java
package org.springframework.security.authorization;

import java.util.function.Supplier;
import org.springframework.lang.Nullable;
import org.springframework.security.core.Authentication;

@FunctionalInterface
public interface AuthorizationManager<T> {
    default void verify(Supplier<Authentication> authentication, T object) {
        AuthorizationDecision decision = this.check(authentication, object);
        if (decision != null && !decision.isGranted()) {
            throw new AuthorizationDeniedException("Access Denied", decision);
        }
    }

    /** @deprecated */
    @Nullable
    @Deprecated
    AuthorizationDecision check(Supplier<Authentication> authentication, T object);

    @Nullable
    default AuthorizationResult authorize(Supplier<Authentication> authentication, T object) {
        return this.check(authentication, object);
    }
}
```

2. AuthorizatioFilter
```java
public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain) throws ServletException, IOException {
        HttpServletRequest request = (HttpServletRequest)servletRequest;
        HttpServletResponse response = (HttpServletResponse)servletResponse;
        if (this.observeOncePerRequest && this.isApplied(request)) {
            chain.doFilter(request, response);
        } else if (this.skipDispatch(request)) {
            chain.doFilter(request, response);
        } else {
            String alreadyFilteredAttributeName = this.getAlreadyFilteredAttributeName();
            request.setAttribute(alreadyFilteredAttributeName, Boolean.TRUE);

            try {
                AuthorizationResult result = this.authorizationManager.authorize(this::getAuthentication, request); // AuthorizationManagerì—ê²Œ ìœ„ì„ í›„, AuthenticationDecision ë°˜í™˜
                this.eventPublisher.publishAuthorizationEvent(this::getAuthentication, request, result);
                if (result != null && !result.isGranted()) {
                    throw new AuthorizationDeniedException("Access Denied", result);
                }

                chain.doFilter(request, response);
            } finally {
                request.removeAttribute(alreadyFilteredAttributeName);
            }

        }
}
```
