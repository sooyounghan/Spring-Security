-----
### Í∞úÏöî
-----
1. Ïä§ÌîÑÎßÅ ÏãúÌÅêÎ¶¨Ìã∞Îäî Ïù∏Ï¶ùÎêú ÏÇ¨Ïö©ÏûêÏóê ÎåÄÌïú ÏÑ∏ÏÖò ÏÉùÏÑ± Ï†ïÏ±ÖÏùÑ ÏÑ§Ï†ïÌïòÏó¨ Ïñ¥ÎñªÍ≤å ÏÑ∏ÏÖòÏùÑ Í¥ÄÎ¶¨Ìï†ÏßÄ Í≤∞Ï†ï Í∞ÄÎä•
2. SessionCreationPolicy ÌÅ¥ÎûòÏä§Î°ú ÏÑ§Ï†ï

-----
### ÏÑ∏ÏÖò ÏÉùÏÑ± Ï†ïÏ±Ö Ï†ÑÎûµ
-----
1. SessionCreationPolicy.ALWAYS
   - Ïù∏Ï¶ù Ïó¨Î∂ÄÏóê ÏÉÅÍ¥ÄÏóÜÏù¥ Ìï≠ÏÉÅ ÏÑ∏ÏÖò ÏÉùÏÑ±
   - ForceEagerSessionCreationFilter ÌÅ¥ÎûòÏä§Î•º Ï∂îÍ∞Ä Íµ¨ÏÑ±ÌïòÍ≥† ÏÑ∏ÏÖòÏùÑ Í∞ïÏ†úÎ°ú ÏÉùÏÑ±

2. SessionCreationPolicy.NEVER
   - Ïä§ÌîÑÎßÅ ÏãúÌÅêÎ¶¨Ìã∞Í∞Ä ÏÑ∏ÏÖòÏùÑ ÏÉùÏÑ±ÌïòÏßÄ ÏïäÏßÄÎßå, Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏù¥ Ïù¥ÎØ∏ ÏÉùÏÑ±Ìïú ÏÑ∏ÏÖòÏùÄ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏùå

3. SessionCreationPolicy.IF_REQUIRED (Í∏∞Î≥∏Í∞í)
   - ÌïÑÏöîÌïú Í≤ΩÏö∞ÏóêÎßå ÏÑ∏ÏÖòÏùÑ ÏÉùÏÑ±
   - ÏòàÎ•º Îì§Ïñ¥, Ïù∏Ï¶ùÏù¥ ÌïÑÏöîÌïú ÏûêÏõêÏóê Ï†ëÍ∑ºÌï† Îïå ÏÑ∏ÏÖòÏùÑ ÏÉùÏÑ±

4. SessionCreationPolicy.STATELESS
   - ÏÑ∏ÏÖòÏùÑ Ï†ÑÌòÄ ÏÉùÏÑ±ÌïòÍ±∞ÎÇò ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏùå
   - Ïù∏Ï¶ù ÌïÑÌÑ∞Îäî Ïù∏Ï¶ù ÏôÑÎ£å ÌõÑ SecurityContextÏóê ÏÑ∏ÏÖòÏùÑ Ï†ÄÏû•ÌïòÏßÄ ÏïäÏúºÎ©∞, JWTÏôÄ Í∞ôÏùÄ ÏÑ∏ÏÖòÏùÑ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÎäî Î∞©ÏãùÏúºÎ°ú Ïù∏Ï¶ùÏùÑ Í¥ÄÎ¶¨Ìï† Îïå Ïú†Ïö©ÌïòÍ≤å ÏÇ¨Ïö© Í∞ÄÎä•
   - SecurityContextHolderFilterÎäî ÏÑ∏ÏÖò Îã®ÏúÑÍ∞Ä ÏïÑÎãå ÏöîÏ≤≠ Îã®ÏúÑÎ°ú Ìï≠ÏÉÅ ÏÉàÎ°úÏö¥ SecurityContext Í∞ùÏ≤¥Î•º ÏÉùÏÑ±ÌïòÎØÄÎ°ú Ïª®ÌÖçÏä§Ìä∏ ÏòÅÏÜçÏÑ±Ïù¥ Ïú†ÏßÄÎêòÏßÄ ÏïäÏùå

-----
### sessionManagement() API - ÏÑ∏ÏÖò ÏÉùÏÑ± Ï†ïÏ±Ö
-----
```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http.sessionManager((session) -> session
        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
    );

    return http.build();
}
```

-----
### üí° STATELESS ÏÑ§Ï†ïÏóêÎèÑ ÏÑ∏ÏÖò ÏÉùÏÑ± Í∞ÄÎä• (Ïù∏Ï¶ù Í¥ÄÏ†ê)
-----
1. Ïä§ÌîÑÎßÅ ÏãúÌÅêÎ¶¨Ìã∞ÏóêÏÑú CSRF Í∏∞Îä•Ïù¥ ÌôúÏÑ±Ìôî ÎêòÏñ¥ ÏûàÍ≥†, CSRF Í∏∞Îä•Ïù¥ ÏàòÌñâÎê† Í≤ΩÏö∞ ÏÇ¨Ïö©ÏûêÏùò ÏÑ∏ÏÖòÏùÑ ÏÉùÏÑ±Ìï¥ÏÑú CSRF ÌÜ†ÌÅ∞ÏùÑ Ï†ÄÏû•ÌïòÍ≤å Îê®
2. ÏÑ∏ÏÖòÏùÄ ÏÉùÏÑ±ÎêòÏßÄÎßå CSRF Í∏∞Îä•ÏùÑ ÏúÑÌï¥ ÏÇ¨Ïö©Îê† Îøê, Ïù∏Ï¶ù ÌîÑÎ°úÏÑ∏Ïä§Ïùò SecurityContext ÏòÅÏÜçÏÑ±Ïóê ÏòÅÌñ•ÏùÑ ÎØ∏ÏπòÏßÄ ÏïäÏùå

-----
### ÏΩîÎìú
-----
1. SecurityConfig
```java
package io.security.springsecuritymaster;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.Customizer;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.provisioning.InMemoryUserDetailsManager;
import org.springframework.security.web.SecurityFilterChain;


@EnableWebSecurity
@Configuration
public class SecurityConfig {

    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {

        http
                .authorizeHttpRequests(auth -> auth
                        .requestMatchers("/login").permitAll()
                        .anyRequest().authenticated()) // Ïñ¥Îñ†Ìïú RequestÏóê ÎåÄÌï¥ÏÑú Ïù∏Ï¶ùÏùÑ Î∞õÏïÑ Ïù∏Í∞Ä Ïã§Ïãú
                .formLogin(Customizer.withDefaults())
                .sessionManagement(session -> session
                        // .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)
                        // .sessionCreationPolicy(SessionCreationPolicy.ALWAYS)
                        // .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
                        .sessionCreationPolicy(SessionCreationPolicy.NEVER)
                );

        return http.build();
    }

    @Bean
    public UserDetailsService userDetailsService() {
        UserDetails user = User.withUsername("user")
                .password("{noop}1111")
                .roles("USER")
                .build();

        return new InMemoryUserDetailsManager(user);
    }
}
```

2. HttpSessionSecurityContextRepository
```java
private SecurityContext readSecurityContextFromSession(HttpSession httpSession) {
     if (httpSession == null) {
         this.logger.trace("No HttpSession currently exists");
         return null;
     } else {
         Object contextFromSession = httpSession.getAttribute(this.springSecurityContextKey);
         if (contextFromSession == null) {
             if (this.logger.isTraceEnabled()) {
                 this.logger.trace(LogMessage.format("Did not find SecurityContext in HttpSession %s using the SPRING_SECURITY_CONTEXT session attribute", httpSession.getId()));
             }

             return null;
         } else if (!(contextFromSession instanceof SecurityContext)) {
             this.logger.warn(LogMessage.format("%s did not contain a SecurityContext but contained: '%s'; are you improperly modifying the HttpSession directly (you should always use SecurityContextHolder) or using the HttpSession attribute reserved for this class?", this.springSecurityContextKey, contextFromSession));
             return null;
         } else {
             if (this.logger.isTraceEnabled()) {
                 this.logger.trace(LogMessage.format("Retrieved %s from %s", contextFromSession, this.springSecurityContextKey));
             } else if (this.logger.isDebugEnabled()) {
                 this.logger.debug(LogMessage.format("Retrieved %s", contextFromSession));
             }

             return (SecurityContext)contextFromSession;
         }
     }
}
```

3. ForceEagerSessionCreationFilter (SessionCreationPolicy.ALWAYS)
```java
package org.springframework.security.web.session;

import jakarta.servlet.FilterChain;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;
import java.io.IOException;
import org.springframework.core.log.LogMessage;
import org.springframework.web.filter.OncePerRequestFilter;

public class ForceEagerSessionCreationFilter extends OncePerRequestFilter {
    public ForceEagerSessionCreationFilter() {
    }

    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {
        HttpSession session = request.getSession(); // Í∞ïÏû¨ ÏÑ∏ÏÖò ÏÉùÏÑ±
        if (this.logger.isDebugEnabled() && session.isNew()) {
            this.logger.debug(LogMessage.format("Created session eagerly", new Object[0]));
        }

        filterChain.doFilter(request, response);
    }
}
```

4. NullSecurityContextRepository (SessionCreationPolicy.STATELESS)
```java
package org.springframework.security.web.context;

import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import org.springframework.security.core.context.SecurityContext;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.core.context.SecurityContextHolderStrategy;
import org.springframework.util.Assert;

public final class NullSecurityContextRepository implements SecurityContextRepository {
    private SecurityContextHolderStrategy securityContextHolderStrategy = SecurityContextHolder.getContextHolderStrategy();

    public NullSecurityContextRepository() {
    }

    public boolean containsContext(HttpServletRequest request) {
        return false;
    }

    public SecurityContext loadContext(HttpRequestResponseHolder requestResponseHolder) {
        return this.securityContextHolderStrategy.createEmptyContext();
    }

    public void saveContext(SecurityContext context, HttpServletRequest request, HttpServletResponse response) {
    }

    public void setSecurityContextHolderStrategy(SecurityContextHolderStrategy securityContextHolderStrategy) {
        Assert.notNull(securityContextHolderStrategy, "securityContextHolderStrategy cannot be null");
        this.securityContextHolderStrategy = securityContextHolderStrategy;
    }
}
```

5. HttpSessionCsrfTokenRepository (SessionCreationPolicy.STATELESS)
```java
 public void saveToken(CsrfToken token, HttpServletRequest request, HttpServletResponse response) {
     HttpSession session;
     if (token == null) { // csrf ÌÜ†ÌÅ∞Ïù¥ Ï°¥Ïû¨ÌïòÏßÄ ÏïäÏúºÎ©¥,
         session = request.getSession(false);
         if (session != null) {
             session.removeAttribute(this.sessionAttributeName);
         }
     } else { // Ï°¥Ïû¨ÌïòÎ©¥,
         session = request.getSession(); // ÏÑ∏ÏÖò Í∞ÄÏ†∏Ïò¥
         session.setAttribute(this.sessionAttributeName, token);
     }

 }
```
