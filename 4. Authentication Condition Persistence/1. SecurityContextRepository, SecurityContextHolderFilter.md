-----
### SecurityContextRepository
-----
1. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì‚¬ìš©ìê°€ ì¸ì¦í•œ ì´í›„ ìš”ì²­ì— ëŒ€í•´ ê³„ì† ì‚¬ìš©ìì˜ ì¸ì¦ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í´ë˜ìŠ¤
2. ì¸ì¦ ìƒíƒœì˜ ì˜ì† ë©”ì»¤ë‹ˆì¦˜ì€ ì‚¬ìš©ìê°€ ì¸ì¦ì„ í•˜ê²Œ ë˜ë©´, í•´ë‹¹ ì‚¬ìš©ìì˜ ì¸ì¦ ì •ë³´ì™€ ê¶Œí•œì´ SecurityContextì— ì €ì¥ë˜ê³ , HttpSessionì„ í†µí•´ ìš”ì²­ ê°„ ì˜ì†ì´ ì´ë£¨ì–´ì§€ëŠ” ë°©ì‹
<div align="center">
<img src="https://github.com/user-attachments/assets/4cef75a8-fc62-45f4-9785-afd61d82387e">
</div>

-----
### êµ¬ì¡°
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/317b3843-ca00-474e-bdd1-1365b7517e8f">
</div>

1. HttpSessionSecurityContextRepository : ìš”ì²­ ê°„ HttpSessionì— ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥, í›„ì† ìš”ì²­ ì‹œ ì»¨í…ìŠ¤íŠ¸ ì˜ì†ì„± ìœ ì§€
2. RequestAttributeSecurityContextRepository : ServletRequestì— ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥, í›„ì† ìš”ì²­ ì‹œ ì»¨í…ìŠ¤íŠ¸ ì˜ì†ì„± ìœ ì§€ ë¶ˆê°€
3. NullSecurityContextRepository : ì„¸ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¸ì¦(JWT, OAuth2) ì¼ ê²½ìš° ì‚¬ìš©í•˜ë©°, ì»¨í…ìŠ¤íŠ¸ ê´€ë ¨ ì•„ë¬´ëŸ° ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠìŒ
4. DelegatingSecurityContextRepository : RequestAttributeSecurityContextRepositoryì™€ HttpSessionSecurityContextRepositoryë¥¼ ë™ì‹œì— ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìœ„ì„ëœ í´ë˜ìŠ¤ë¡œì„œ, ì´ˆê¸°í™” ì‹œ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •

-----
### ğŸ’¡ SecurityContextHolderFilter
-----
1. SecurityContextRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ SecurityContextë¥¼ ì–»ê³ , ì´ë¥¼ SecurityContextHolderì— ì„¤ì •í•˜ëŠ” í•„í„° í´ë˜ìŠ¤
2. ì´ í•„í„° í´ë˜ìŠ¤ëŠ” SecurityContextRepository.saveContext()ë¥¼ ê°•ì œë¡œ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šê³ , ì‚¬ìš©ìê°€ ëª…ì‹œì ìœ¼ë¡œ í˜¸ì¶œë˜ì–´ì•¼ SecurityContextë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ”ë° ì´ëŠ” SecurityContextPersistenceFilterì™€ ë‹¤ë¥¸ì 
3. ì¸ì¦ì´ ì§€ì†ë˜ì–´ì•¼ í•˜ëŠ”ì§€ë¥¼ ê° ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ì´ ë…ë¦½ì ìœ¼ë¡œ ì„ íƒí•  ìˆ˜ ìˆê²Œ í•˜ì—¬, ë” ë‚˜ì€ ìœ ì—°ì„±ì„ ì œê³µí•˜ê³ , HttpSessionì— í•„ìš”í•  ë•Œë§Œ ì €ì¥í•¨ìœ¼ë¡œì¨ ì„±ëŠ¥ í–¥ìƒ

-----
### SecurityContext ìƒì„±, ì €ì¥, ì‚­ì œ
-----
1. ìµëª… ì‚¬ìš©ì
   - SecurityContextRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ SecurityContext ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ SecurityContextHolderì— ì €ì¥ í›„ ë‹¤ìŒ í•„í„°ë¡œ ì „ë‹¬
   - AnonymousAuthenticationFilterì—ì„œ AnonymousAuthenticationToken ê°ì²´ë¥¼ SecurityContextì— ì €ì¥

2. ì¸ì¦ ìš”ì²­
   - SecurityContextRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ SecurityContext ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ SecurityContextHolderì— ì €ì¥ í›„ ë‹¤ìŒ í•„í„°ë¡œ ì „ë‹¬
   - UsernamePasswordAuthenticationFilterì—ì„œ ì¸ì¦ ì„±ê³µ í›„, SecurityContextì— UsernamePasswordAuthentication ê°ì²´ë¥¼ ì €ì¥
   - SecurityContextRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ HttpSessionì— SecurityContext ì €ì¥ (Form ì¸ì¦ì˜ ê²½ìš°ì—ëŠ” ì²˜ë¦¬)

3. ì¸ì¦ í›„ ìš”ì²­
   - SecurityContextRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ HttpSessionì—ì„œ SecurityContextë¥¼ êº¼ë‚´ì–´ SecurityContextHolderì—ì„œ ì €ì¥ í›„ ë‹¤ìŒ í•„í„°ë¡œ ì „ë‹¬
   - SecurityContext ì•ˆì— Authentication ê°ì²´ê°€ ì¡´ì¬í•˜ë©´ ê³„ì† ì¸ì¦ ìœ ì§€

4. í´ë¼ì´ì–¸íŠ¸ ì‘ë‹µ ì‹œ ê³µí†µ
   - SecurityContextHolder.clearContext()ë¡œ ì»¨í…ìŠ¤íŠ¸ ì‚­ì œ (ğŸ’¡ Thread Poolì˜ Threadì¼ ê²½ìš° ë°˜ë“œì‹œ í•„ìš”)

-----
### SecurityContextHolderFilter íë¦„ë„
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/472a46e6-42f8-4d5f-a714-1f652c3db748">
</div>

-----
### SecurityContextHolderFilter & SecurityContextPersistenceFilter
----
<div align="center">
<img src="https://github.com/user-attachments/assets/45642d5b-ed2c-4a8c-857c-bc2f410cb70a">
</div>

-----
### securityContex() API
-----
```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http.securityContext(securityContext ->
        securityContext.requiredExplicitSave(true); // SecurityContextë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì €ì¥í•  ê²ƒì¸ì§€ ì•„ë‹Œì§€ ì—¬ë¶€ ê²°ì • (ê¸°ë³¸ê°’ : true)
                                                    // trueì´ë©´, SecurityContextHolderFilter / falseì´ë©´, SecurityContextPersistenceFilterê°€ ì‹¤í–‰
    return http.build();
}
```
  - í˜„ì¬ SecurityContextPersistenceFilterëŠ” Deprecated ë˜ì—ˆìœ¼ë¯€ë¡œ, ë ˆê±°ì‹œ ì‹œìŠ¤í…œ ì™¸ì—ëŠ” SecurityContextHolderFilterë¥¼ ì‚¬ìš©í•˜ë©´ ë¨

-----
### CustomAuthenticationFilter & SecurityContextRepository
-----
1. ì»¤ìŠ¤í…€ í•œ ì¸ì¦ í•„í„°ë¥¼ êµ¬í˜„í•  ê²½ìš° ì¸ì¦ì´ ì™„ë£Œëœ í›„ SecurityContextë¥¼ SecurityContextHolderì— ì„¤ì •í•œ í›„ securityContextRepositoryì— ì €ì¥í•˜ê¸° ìœ„í•œ ì½”ë“œë¥¼ ëª…ì‹œì  ì‘ì„±í•´ì¤˜ì•¼ í•˜
```java
securityContextHolderStrategy.setContext(context);
securityContextRepository.saveContext(context, request, response);
```
2. SecurityContextRepositoryëŠ” HttpSessionSecurityContextRepository í˜¹ì€ DelegatingSecurityContextRepositoryë¥¼ ì‚¬ìš©í•˜ë©´ ë¨
