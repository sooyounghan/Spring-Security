-----
### í”„ë¡œì íŠ¸ êµ¬ì„±
-----
1. Spring Boot 3.x ë²„ì „ (í˜„ì¬ 3.2.2)
2. JDK 17
3. Gradle
<div align="center">
<img src="https://github.com/user-attachments/assets/7867312b-424c-403c-a9f1-0d5e386bd9cb">
</div>

-----
### ì˜ì¡´ì„± ì¶”ê°€
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/c1f4be16-9ab8-46be-9c26-ddd056a5ed79">
</div>

```gradle
plugins {
	id 'java'
	id 'org.springframework.boot' version '3.4.2'
	id 'io.spring.dependency-management' version '1.1.7'
}

group = 'io.security'
version = '0.0.1-SNAPSHOT'

java {
	toolchain {
		languageVersion = JavaLanguageVersion.of(17)
	}
}

repositories {
	mavenCentral()
}

dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-security'
	implementation 'org.springframework.boot:spring-boot-starter-web'
	testImplementation 'org.springframework.boot:spring-boot-starter-test'
	testImplementation 'org.springframework.security:spring-security-test'
	testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
}

tasks.named('test') {
	useJUnitPlatform()
}
```

-----
### ìë™ ì„¤ì •ì— ì˜í•œ ê¸°ë³¸ ë³´ì•ˆ ì‘ë™
-----
1. ì„œë²„ê°€ ê°€ë™ë˜ë©´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ì´ˆê¸°í™” ì‘ì—… ë° ë³´ì•ˆ ì„¤ì •ì´ ì´ë£¨ì–´ì§
2. ğŸ’¡ ë³„ë„ì˜ ì„¤ì •ì´ë‚˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ê¸°ë³¸ì ì¸ ì›¹ ë³´ì•ˆ ê¸°ëŠ¥ì´ í˜„ì¬ ì‹œìŠ¤í…œì— ì—°ë™ë˜ì–´ ì‘ë™
   - ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ ì¸ì¦ ì—¬ë¶€ë¥¼ ê²€ì¦í•˜ê³  ì¸ì¦ì´ ìŠ¹ì¸ë˜ì–´ì•¼ ìì›ì— ì ‘ê·¼ ê°€ëŠ¥
   - ì¸ì¦ ë°©ì‹ì€ í¼ ë¡œê·¸ì¸ ë°©ì‹ê³¼ httpBasic ë¡œê·¸ì¸ ë°©ì‹ (ê¸°ë³¸ ë¡œê·¸ì¸ ë°©ì‹)ì„ ì œê³µ
   - ì¸ì¦ì„ ì‹œë„í•  ìˆ˜ ìˆëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ê°€ ìë™ì ìœ¼ë¡œ ìƒì„±ë˜ì–´ ë Œë”ë§
   - ì¸ì¦ ìŠ¹ì¸ì´ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆë„ë¡ í•œ ê°œì˜ ê³„ì •ì´ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µ
     + SecurityProperties ì„¤ì • í´ë˜ìŠ¤ì—ì„œ ìƒì„±
     + username : user
     + password : ëœë¤ ë¬¸ìì—´

3. SpringBootWebSecurityConfiguration
   - ìë™ ì„¤ì •ì— ì˜í•œ ê¸°ë³¸ ë³´ì•ˆ ì„¤ì • í´ë˜ìŠ¤ ìƒì„±
<div align="center">
<img src="https://github.com/user-attachments/assets/05990c28-1d44-4aef-8e9c-af621eb44005">
</div>
 
  - ë¬¸ì œì 
    + ê³„ì • ì¶”ê°€ë‚˜ ê¶Œí•œ ì¶”ê°€ ì‹œ ë¬¸ì œì 
    + ì‹œìŠ¤í…œì—ì„œ í•„ìš”ë¡œ í•˜ëŠ” ë” ì„¸ë¶€ì ì´ê³  ì¶”ê°€ì ì¸ ë³´ì•ˆ ê¸°ëŠ¥ì´ í•„ìš”í•  ë•Œ ë¬¸ì œì 

```java
//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by FernFlower decompiler)
//

package org.springframework.boot.autoconfigure.security.servlet;

import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;
import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication.Type;
import org.springframework.boot.autoconfigure.security.ConditionalOnDefaultWebSecurity;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.annotation.Order;
import org.springframework.security.config.Customizer;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configurers.AuthorizeHttpRequestsConfigurer;
import org.springframework.security.web.SecurityFilterChain;

@Configuration(
    proxyBeanMethods = false
)
@ConditionalOnWebApplication(
    type = Type.SERVLET
)
class SpringBootWebSecurityConfiguration {
    SpringBootWebSecurityConfiguration() {
    }

    @Configuration(
        proxyBeanMethods = false
    )
    @ConditionalOnMissingBean(
        name = {"springSecurityFilterChain"}
    )
    @ConditionalOnClass({EnableWebSecurity.class})
    @EnableWebSecurity
    static class WebSecurityEnablerConfiguration {
        WebSecurityEnablerConfiguration() {
        }
    }

    // ì‹¤í–‰ ë¶€ë¶„
    @Configuration(
        proxyBeanMethods = false
    )
    @ConditionalOnDefaultWebSecurity
    static class SecurityFilterChainConfiguration {
        SecurityFilterChainConfiguration() {
        }

        @Bean
        @Order(2147483642)
        SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {
            http.authorizeHttpRequests((requests) -> {
                ((AuthorizeHttpRequestsConfigurer.AuthorizedUrl)requests.anyRequest()).authenticated();
            });
            http.formLogin(Customizer.withDefaults());
            http.httpBasic(Customizer.withDefaults());
            return (SecurityFilterChain)http.build();
        }
    }
}
```

4. @ConditionalOnDefaultWebSecurity
```java
//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by FernFlower decompiler)
//

package org.springframework.boot.autoconfigure.security;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import org.springframework.context.annotation.Conditional;

@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Conditional({DefaultWebSecurityCondition.class})
public @interface ConditionalOnDefaultWebSecurity {
}
```

5. DefaultWebSecurityCondition
```java
//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by FernFlower decompiler)
//

package org.springframework.boot.autoconfigure.security;

import org.springframework.boot.autoconfigure.condition.AllNestedConditions;
import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.context.annotation.ConfigurationCondition.ConfigurationPhase;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.web.SecurityFilterChain;

class DefaultWebSecurityCondition extends AllNestedConditions {
    DefaultWebSecurityCondition() {
        super(ConfigurationPhase.REGISTER_BEAN);
    }

    @ConditionalOnMissingBean({SecurityFilterChain.class}) // True -> defaultSecurityFilterChain ìƒì„±
    static class Beans {
        Beans() {
        }
    }

    @ConditionalOnClass({SecurityFilterChain.class, HttpSecurity.class}) // True
    static class Classes {
        Classes() {
        }
    }
}
```

-----
### ì˜ˆì œ
-----
1. IndexController
```java
package io.security.springsecuritymaster;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class IndexController {

    @GetMapping("/")
    public String index() {
        return "index";
    }
}
```

```
Using generated security password: 819f185e-6667-4a30-b54b-0233086c9758

This generated password is for development use only.
Your security configuration must be updated before running your application in production.
```

<div align="center">
<img src="https://github.com/user-attachments/assets/6618454f-918d-4899-a232-5b293d0f80ea">
</div>

2. username, password ì…ë ¥ í›„ í™”ë©´
<div align="center">
<img src="https://github.com/user-attachments/assets/4e1e120c-4256-4c45-8fb0-31cf1d79fba6">
</div>

-----
### SpringSecurityProperties
-----
1. ê¸°ë³¸ ê³„ì • í•˜ë‚˜ë¥¼ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤
```java
//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by FernFlower decompiler)
//

package org.springframework.boot.autoconfigure.security;

import java.util.ArrayList;
import java.util.EnumSet;
import java.util.List;
import java.util.Set;
import java.util.UUID;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.web.servlet.DispatcherType;
import org.springframework.util.StringUtils;

@ConfigurationProperties(
    prefix = "spring.security"
)
public class SecurityProperties {
    public static final int BASIC_AUTH_ORDER = 2147483642;
    public static final int IGNORED_ORDER = Integer.MIN_VALUE;
    public static final int DEFAULT_FILTER_ORDER = -100;
    private final Filter filter = new Filter();
    private final User user = new User();

    public SecurityProperties() {
    }

    public User getUser() {
        return this.user;
    }

    public Filter getFilter() {
        return this.filter;
    }

    public static class Filter {
        private int order = -100;
        private Set<DispatcherType> dispatcherTypes = EnumSet.allOf(DispatcherType.class);

        public Filter() {
        }

        public int getOrder() {
            return this.order;
        }

        public void setOrder(int order) {
            this.order = order;
        }

        public Set<DispatcherType> getDispatcherTypes() {
            return this.dispatcherTypes;
        }

        public void setDispatcherTypes(Set<DispatcherType> dispatcherTypes) {
            this.dispatcherTypes = dispatcherTypes;
        }
    }

    public static class User {
        private String name = "user";
        private String password = UUID.randomUUID().toString();
        private List<String> roles = new ArrayList();
        private boolean passwordGenerated = true;

        public User() {
        }

        public String getName() { // InMemoryUserDetailsManager - inMemoryUserDetailsManager
            return this.name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getPassword() {
            return this.password;
        }

        public void setPassword(String password) {
            if (StringUtils.hasLength(password)) {
                this.passwordGenerated = false;
                this.password = password;
            }
        }

        public List<String> getRoles() {
            return this.roles;
        }

        public void setRoles(List<String> roles) {
            this.roles = new ArrayList(roles);
        }

        public boolean isPasswordGenerated() {
            return this.passwordGenerated;
        }
    }
}
```

